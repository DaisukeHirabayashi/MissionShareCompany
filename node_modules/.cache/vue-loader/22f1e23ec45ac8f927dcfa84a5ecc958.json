{"remainingRequest":"/Users/k17111kk/github/MissionShareCompany/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/k17111kk/github/MissionShareCompany/src/views/SelectMainCompany.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/k17111kk/github/MissionShareCompany/src/views/SelectMainCompany.vue","mtime":1575525192286},{"path":"/Users/k17111kk/github/MissionShareCompany/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/k17111kk/github/MissionShareCompany/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/k17111kk/github/MissionShareCompany/node_modules/vuetify-loader/lib/loader.js","mtime":1564062719000},{"path":"/Users/k17111kk/github/MissionShareCompany/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/k17111kk/github/MissionShareCompany/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCi8vIGZpcmViYXNlIOODouOCuOODpeODvOODqwppbXBvcnQgZmlyZWJhc2UgZnJvbSAiZmlyZWJhc2UiOwppbXBvcnQgeyBtYXBTdGF0ZSwgbWFwTXV0YXRpb25zIH0gZnJvbSAidnVleCI7CmltcG9ydCB7IEtFWV9VUERBVEUgfSBmcm9tICIuLi9zdG9yZS9tdXRhdGlvbi10eXBlcyI7CmltcG9ydCB7IFZ1ZUxvYWRpbmcgfSBmcm9tICJ2dWUtbG9hZGluZy10ZW1wbGF0ZSI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAic2VsZWN0bWFpbmNvbXBhbnkiLAogIGNvbXBvbmVudHM6IHsKICAgIFZ1ZUxvYWRpbmcKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBjaGVja05hbWVzOiBbXSwKICAgICAgbG9hZGluZzogdHJ1ZSwKICAgICAgdXNlcjoge30sIC8vIOODpuODvOOCtuODvOaDheWgsQogICAgICBjb21wYW55czogW10sIC8vIOWPluW+l+OBl+OBn+ODoeODg+OCu+ODvOOCuOOCkuWFpeOCjOOCi+mFjeWIlwogICAgICBpbnB1dDogIiIgLy8g5YWl5Yqb44GX44Gf44Oh44OD44K744O844K4CiAgICB9OwogIH0sCiAgY3JlYXRlZCgpIHsKICAgIGZpcmViYXNlLmF1dGgoKS5vbkF1dGhTdGF0ZUNoYW5nZWQodXNlciA9PiB7CiAgICAgIHRoaXMudXNlciA9IHVzZXIgPyB1c2VyIDoge307CiAgICAgIGNvbnN0IGNvbXBhbnlEYXRhID0gZmlyZWJhc2UuZGF0YWJhc2UoKS5yZWYoIm1haW4tY29tcGFueSIpOwogICAgICBpZiAodXNlcikgewogICAgICAgIHRoaXMuY29tcGFueXMgPSBbXTsKICAgICAgICAvLyBjb21wYW55IOOBq+WkieabtOOBjOOBguOBo+OBn+OBqOOBjeOBruODj+ODs+ODieODqeOCkueZu+mMsgogICAgICAgIGNvbXBhbnlEYXRhLmxpbWl0VG9MYXN0KDEwMCkub24oImNoaWxkX2FkZGVkIiwgdGhpcy5jaGlsZEFkZGVkKTsKICAgICAgfSBlbHNlIHsKICAgICAgICAvLyBjb21wYW55IOOBq+WkieabtOOBjOOBguOBo+OBn+OBqOOBjeOBruODj+ODs+ODieODqeOCkuino+mZpAogICAgICAgIGNvbXBhbnlEYXRhLmxpbWl0VG9MYXN0KDEwMCkub2ZmKCJjaGlsZF9hZGRlZCIsIHRoaXMuY2hpbGRBZGRlZCk7CiAgICAgIH0KICAgIH0pOwogIH0sCiAgbW91bnRlZCgpIHsKICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgIH0sIDEwMDApOwogIH0sCiAgbWV0aG9kczogewogICAgLy8g44K544Kv44Ot44O844Or5L2N572u44KS5LiA55Wq5LiL44Gr56e75YuVCiAgICAuLi5tYXBNdXRhdGlvbnMoewogICAgICBLRVlfVVBEQVRFCiAgICB9KSwKICAgIHNjcm9sbEJvdHRvbSgpIHsKICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gewogICAgICAgIHdpbmRvdy5zY3JvbGxUbygwLCBkb2N1bWVudC5ib2R5LmNsaWVudEhlaWdodCk7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOWPl+OBkeWPluOBo+OBn+ODoeODg+OCu+ODvOOCuOOCkmNvbXBhbnlz44Gr6L+95YqgCiAgICAvLyDjg4fjg7zjgr/jg5njg7zjgrnjgavmlrDjgZfjgYTopoHntKDjgYzov73liqDjgZXjgozjgovjgajpmo/mmYLlkbzjgbPlh7rjgZXjgozjgosKICAgIGNoaWxkQWRkZWQoc25hcCkgewogICAgICBjb25zdCBjb21wYW55ID0gc25hcC52YWwoKTsKICAgICAgdGhpcy5jb21wYW55cy5wdXNoKHsKICAgICAgICBrZXk6IHNuYXAua2V5LAogICAgICAgIG5hbWU6IGNvbXBhbnkubmFtZSwKICAgICAgICBwcmVmZWN0dXJlOiBjb21wYW55LnByZWZlY3R1cmUsCiAgICAgICAgYWRkcmVzczogY29tcGFueS5hZGRyZXNzLAogICAgICAgIHVybDogY29tcGFueS51cmwsCiAgICAgICAgcGhvbmVudW1iZXI6IGNvbXBhbnkucGhvbmVudW1iZXIKICAgICAgfSk7CiAgICAgIHRoaXMuc2Nyb2xsQm90dG9tKCk7CiAgICB9LAogICAgc2VuZERldGFpbCgpIHsKICAgICAgZG9jdW1lbnQubG9jYXRpb24uaHJlZiA9ICIuL3N1YnJlZ2lzdGVyIjsKICAgIH0sCiAgICBrZXlTZW5kKGtleSkgewogICAgICB0aGlzLktFWV9VUERBVEUoa2V5KTsgLy/kvJrnpL7mg4XloLHjgpLoqbPntLDnlLvpnaLjgavpgIHjgosKICAgICAgdGhpcy5zZW5kRGV0YWlsKCk7CiAgICB9CiAgfQp9Owo="},{"version":3,"sources":["SelectMainCompany.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"SelectMainCompany.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"home\">\n    <div id=\"app\">\n      <template v-if=\"this.loading\">\n        <vue-loading\n          type=\"balls\"\n          color=\"#333\"\n          :size=\"{ width: '50px', height: '50px' }\"\n        ></vue-loading>\n      </template>\n      <template v-else>\n        <v-container v-if=\"!user.uid\">\n          <h3 class=\"p-3\">まずは右上のボタンからログイン!</h3>\n        </v-container>\n        <v-container v-else class=\"mx-auto text-left p-3\">\n          <h3 class=\"p-3\">本社選択</h3>\n          <!--Firebase から取得したリストを描画（トランジション付き）-->\n          <v-list two-line subheader shaped>\n            <v-subheader>COMPANYS</v-subheader>\n            <v-list-item-group color=\"primary\">\n              <v-list-item\n                v-for=\"{\n                  key,\n                  name,\n                  prefecture,\n                  address,\n                  url,\n                  phonenumber,\n                  user_id,\n                  type\n                } in companys\"\n              >\n                <v-list-item-content\n                  @click=\"\n                    keySend({\n                      key,\n                      name\n                    })\n                  \"\n                >\n                  <v-list-item-title\n                    style=\"text-align: left;\"\n                    class=\"ml-4\"\n                    v-text=\"prefecture\"\n                  ></v-list-item-title>\n                  <v-list-item-subtitle\n                    style=\"text-align: left;\"\n                    class=\"ml-4\"\n                    v-text=\"name\"\n                  ></v-list-item-subtitle>\n                </v-list-item-content>\n              </v-list-item>\n            </v-list-item-group>\n          </v-list>\n        </v-container>\n      </template>\n    </div>\n  </div>\n</template>\n\n<script>\n// firebase モジュール\nimport firebase from \"firebase\";\nimport { mapState, mapMutations } from \"vuex\";\nimport { KEY_UPDATE } from \"../store/mutation-types\";\nimport { VueLoading } from \"vue-loading-template\";\nexport default {\n  name: \"selectmaincompany\",\n  components: {\n    VueLoading\n  },\n  data() {\n    return {\n      checkNames: [],\n      loading: true,\n      user: {}, // ユーザー情報\n      companys: [], // 取得したメッセージを入れる配列\n      input: \"\" // 入力したメッセージ\n    };\n  },\n  created() {\n    firebase.auth().onAuthStateChanged(user => {\n      this.user = user ? user : {};\n      const companyData = firebase.database().ref(\"main-company\");\n      if (user) {\n        this.companys = [];\n        // company に変更があったときのハンドラを登録\n        companyData.limitToLast(100).on(\"child_added\", this.childAdded);\n      } else {\n        // company に変更があったときのハンドラを解除\n        companyData.limitToLast(100).off(\"child_added\", this.childAdded);\n      }\n    });\n  },\n  mounted() {\n    setTimeout(() => {\n      this.loading = false;\n    }, 1000);\n  },\n  methods: {\n    // スクロール位置を一番下に移動\n    ...mapMutations({\n      KEY_UPDATE\n    }),\n    scrollBottom() {\n      this.$nextTick(() => {\n        window.scrollTo(0, document.body.clientHeight);\n      });\n    },\n    // 受け取ったメッセージをcompanysに追加\n    // データベースに新しい要素が追加されると随時呼び出される\n    childAdded(snap) {\n      const company = snap.val();\n      this.companys.push({\n        key: snap.key,\n        name: company.name,\n        prefecture: company.prefecture,\n        address: company.address,\n        url: company.url,\n        phonenumber: company.phonenumber\n      });\n      this.scrollBottom();\n    },\n    sendDetail() {\n      document.location.href = \"./subregister\";\n    },\n    keySend(key) {\n      this.KEY_UPDATE(key); //会社情報を詳細画面に送る\n      this.sendDetail();\n    }\n  }\n};\n</script>\n"]}]}