{"remainingRequest":"/Users/k17111kk/TechTrain/techTrain_mission/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/k17111kk/TechTrain/techTrain_mission/src/views/Detail.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/k17111kk/TechTrain/techTrain_mission/src/views/Detail.vue","mtime":1572591725829},{"path":"/Users/k17111kk/TechTrain/techTrain_mission/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/k17111kk/TechTrain/techTrain_mission/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/k17111kk/TechTrain/techTrain_mission/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/k17111kk/TechTrain/techTrain_mission/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcFN0YXRlIH0gZnJvbSAidnVleCI7CmltcG9ydCBmaXJlYmFzZSBmcm9tICJmaXJlYmFzZSI7CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdXNlcjoge30sIC8vIOODpuODvOOCtuODvOaDheWgsQogICAgICBjaGF0OiBbXSwgLy8g5Y+W5b6X44GX44Gf44Oh44OD44K744O844K444KS5YWl44KM44KL6YWN5YiXCiAgICAgIGlucHV0OiAiIiAvLyDlhaXlipvjgZfjgZ/jg6Hjg4Pjgrvjg7zjgrgKICAgIH07CiAgfSwKICBjcmVhdGVkKCkgewogICAgZmlyZWJhc2UuYXV0aCgpLm9uQXV0aFN0YXRlQ2hhbmdlZCh1c2VyID0+IHsKICAgICAgdGhpcy51c2VyID0gdXNlciA/IHVzZXIgOiB7fTsKICAgICAgdGhpcy5jaGF0ID0gW107CiAgICAgIGNvbnN0IHJlZl9tZXNzYWdlID0gZmlyZWJhc2UuZGF0YWJhc2UoKS5yZWYoImNvbW1lbnQiKTsKICAgICAgcmVmX21lc3NhZ2UubGltaXRUb0xhc3QoMTApLm9uKCJjaGlsZF9hZGRlZCIsIHRoaXMuY2hpbGRBZGRlZCk7CiAgICAgIC8vIGNvbXBhbnkg44Gr5aSJ5pu044GM44GC44Gj44Gf44Go44GN44Gu44OP44Oz44OJ44Op44KS55m76YyyCiAgICAgIC8vY29tcGFueURhdGEubGltaXRUb0xhc3QoMTApLm9uKCJjaGlsZF9hZGRlZCIsIHRoaXMuY2hpbGRBZGRlZCk7CiAgICB9KTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICAuLi5tYXBTdGF0ZSh7CiAgICAgIGNvbXBhbnk6ICJjb21wYW55IgogICAgfSkKICB9LAogIG1ldGhvZHM6IHsKICAgIGNoaWxkQWRkZWQoc25hcCkgewogICAgICBjb25zdCBtZXNzYWdlID0gc25hcC52YWwoKTsKICAgICAgdGhpcy5jaGF0LnB1c2goewogICAgICAgIGtleTogc25hcC5rZXksCiAgICAgICAgbmFtZTogbWVzc2FnZS5uYW1lLAogICAgICAgIGltYWdlOiBtZXNzYWdlLmltYWdlLAogICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2UubWVzc2FnZQogICAgICB9KTsKICAgIH0sCiAgICBkb1NlbmQoKSB7CiAgICAgIGlmICh0aGlzLnVzZXIudWlkICYmIHRoaXMuaW5wdXQubGVuZ3RoKSB7CiAgICAgICAgLy8gZmlyZWJhc2Ug44Gr44Oh44OD44K744O844K444KS6L+95YqgCiAgICAgICAgZmlyZWJhc2UKICAgICAgICAgIC5kYXRhYmFzZSgpCiAgICAgICAgICAucmVmKCJjb21tZW50IikKICAgICAgICAgIC5wdXNoKAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgbWVzc2FnZTogdGhpcy5pbnB1dCwKICAgICAgICAgICAgICBuYW1lOiB0aGlzLnVzZXIuZGlzcGxheU5hbWUsCiAgICAgICAgICAgICAgZnJvbTogSlNPTi5zdHJpbmdpZnkodGhpcy51c2VyKSwKICAgICAgICAgICAgICBpbWFnZTogdGhpcy51c2VyLnBob3RvVVJMCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgICgpID0+IHsKICAgICAgICAgICAgICB0aGlzLmlucHV0ID0gIiI7IC8vIOODleOCqeODvOODoOOCkuepuuOBq+OBmeOCiwogICAgICAgICAgICB9CiAgICAgICAgICApOwogICAgICB9CiAgICB9CiAgfQp9Owo="},{"version":3,"sources":["Detail.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Detail.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"detail\">\n    <h2>詳細ページ</h2>\n    <div>会社名:{{ company.name }}</div>\n    <div>従業員数:{{ company.member }}</div>\n    <div>本社:{{ company.place }}</div>\n    <div>設立年:{{ company.year }}</div>\n    <div>資本金:{{ company.money }}</div>\n    <div>会社詳細:{{ company.detail }}</div>\n    <!--Firebase から取得したリストを描画（トランジション付き）-->\n    <transition-group name=\"chat\" tag=\"div\" class=\"list content\">\n      <section\n        v-for=\"{ key, name, image, message } in chat\"\n        :key=\"key\"\n        class=\"item\"\n      >\n        <div class=\"item-image\">\n          <img :src=\"image\" width=\"40\" height=\"40\" />\n        </div>\n        <div class=\"item-detail\">\n          <div class=\"item-name\">{{ name }}</div>\n          <div class=\"item-message\">\n            <nl2br tag=\"div\" :text=\"message\" />\n          </div>\n        </div>\n      </section>\n    </transition-group>\n\n    <!-- 入力フォーム -->\n    <form action=\"\" @submit.prevent=\"doSend\" class=\"form\">\n      <textarea\n        v-model=\"input\"\n        :disabled=\"!user.uid\"\n        @keydown.enter.exact.prevent=\"doSend\"\n      ></textarea>\n      <button type=\"submit\" :disabled=\"!user.uid\" class=\"send-button\">\n        Send\n      </button>\n    </form>\n  </div>\n</template>\n<script>\nimport { mapState } from \"vuex\";\nimport firebase from \"firebase\";\nexport default {\n  data() {\n    return {\n      user: {}, // ユーザー情報\n      chat: [], // 取得したメッセージを入れる配列\n      input: \"\" // 入力したメッセージ\n    };\n  },\n  created() {\n    firebase.auth().onAuthStateChanged(user => {\n      this.user = user ? user : {};\n      this.chat = [];\n      const ref_message = firebase.database().ref(\"comment\");\n      ref_message.limitToLast(10).on(\"child_added\", this.childAdded);\n      // company に変更があったときのハンドラを登録\n      //companyData.limitToLast(10).on(\"child_added\", this.childAdded);\n    });\n  },\n  computed: {\n    ...mapState({\n      company: \"company\"\n    })\n  },\n  methods: {\n    childAdded(snap) {\n      const message = snap.val();\n      this.chat.push({\n        key: snap.key,\n        name: message.name,\n        image: message.image,\n        message: message.message\n      });\n    },\n    doSend() {\n      if (this.user.uid && this.input.length) {\n        // firebase にメッセージを追加\n        firebase\n          .database()\n          .ref(\"comment\")\n          .push(\n            {\n              message: this.input,\n              name: this.user.displayName,\n              from: JSON.stringify(this.user),\n              image: this.user.photoURL\n            },\n            () => {\n              this.input = \"\"; // フォームを空にする\n            }\n          );\n      }\n    }\n  }\n};\n</script>\n"]}]}