{"remainingRequest":"/Users/k17111kk/TechTrain/techTrain_mission/node_modules/babel-loader/lib/index.js!/Users/k17111kk/TechTrain/techTrain_mission/node_modules/vuetify-loader/lib/loader.js!/Users/k17111kk/TechTrain/techTrain_mission/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/k17111kk/TechTrain/techTrain_mission/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/k17111kk/TechTrain/techTrain_mission/src/views/Detail.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/k17111kk/TechTrain/techTrain_mission/src/views/Detail.vue","mtime":1572928681606},{"path":"/Users/k17111kk/TechTrain/techTrain_mission/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/k17111kk/TechTrain/techTrain_mission/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/k17111kk/TechTrain/techTrain_mission/node_modules/vuetify-loader/lib/loader.js","mtime":1564062719000},{"path":"/Users/k17111kk/TechTrain/techTrain_mission/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/k17111kk/TechTrain/techTrain_mission/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmdldC1vd24tcHJvcGVydHktZGVzY3JpcHRvciI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3JzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoIjsKaW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICIvVXNlcnMvazE3MTExa2svVGVjaFRyYWluL3RlY2hUcmFpbl9taXNzaW9uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS1jb3JlanMzL2hlbHBlcnMvZXNtL2RlZmluZVByb3BlcnR5IjsKCmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgeyB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOyBpZiAoZW51bWVyYWJsZU9ubHkpIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOyB9KTsga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOyB9IHJldHVybiBrZXlzOyB9CgpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTsgaWYgKGkgJSAyKSB7IG93bktleXMoc291cmNlLCB0cnVlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7IH0pOyB9IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7IH0gZWxzZSB7IG93bktleXMoc291cmNlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7IH0pOyB9IH0gcmV0dXJuIHRhcmdldDsgfQoKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgbWFwU3RhdGUgfSBmcm9tICJ2dWV4IjsKaW1wb3J0IGZpcmViYXNlIGZyb20gImZpcmViYXNlIjsKaW1wb3J0IE5sMmJyIGZyb20gInZ1ZS1ubDJiciI7CmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBObDJicjogTmwyYnIKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB1c2VyOiB7fSwKICAgICAgLy8g44Om44O844K244O85oOF5aCxCiAgICAgIGNoYXQ6IFtdLAogICAgICAvLyDlj5blvpfjgZfjgZ/jg6Hjg4Pjgrvjg7zjgrjjgpLlhaXjgozjgovphY3liJcKICAgICAgaW5wdXQ6ICIiIC8vIOWFpeWKm+OBl+OBn+ODoeODg+OCu+ODvOOCuAoKICAgIH07CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7CiAgICAgIGZpcmViYXNlLmF1dGgoKS5vbkF1dGhTdGF0ZUNoYW5nZWQoZnVuY3Rpb24gKHVzZXIpIHsKICAgICAgICBfdGhpcy51c2VyID0gdXNlciA/IHVzZXIgOiB7fTsKICAgICAgICBfdGhpcy5jaGF0ID0gW107CiAgICAgICAgdmFyIHJlZl9tZXNzYWdlID0gZmlyZWJhc2UuZGF0YWJhc2UoKS5yZWYoImNvbW1lbnQvIiArIF90aGlzLiRzdG9yZS5zdGF0ZS5jb21wYW55LmtleSk7CiAgICAgICAgcmVmX21lc3NhZ2UubGltaXRUb0xhc3QoMTAwKS5vbigiY2hpbGRfYWRkZWQiLCBfdGhpcy5jaGlsZEFkZGVkKTsKICAgICAgfSk7CiAgICB9LCAxMDApOyAvL+abtOaWsOOBq+aZgumWk+OBjOOBi+OBi+OCi+OBn+OCgQogIH0sCiAgY29tcHV0ZWQ6IF9vYmplY3RTcHJlYWQoe30sIG1hcFN0YXRlKHsKICAgIGNvbXBhbnk6ICJjb21wYW55IgogIH0pKSwKICBtZXRob2RzOiB7CiAgICBjaGlsZEFkZGVkOiBmdW5jdGlvbiBjaGlsZEFkZGVkKHNuYXApIHsKICAgICAgdmFyIG1lc3NhZ2UgPSBzbmFwLnZhbCgpOwogICAgICB0aGlzLmNoYXQucHVzaCh7CiAgICAgICAga2V5OiBzbmFwLmtleSwKICAgICAgICBuYW1lOiBtZXNzYWdlLm5hbWUsCiAgICAgICAgaW1hZ2U6IG1lc3NhZ2UuaW1hZ2UsCiAgICAgICAgbWVzc2FnZTogbWVzc2FnZS5tZXNzYWdlLAogICAgICAgIGNvbXBhbnlrZXk6IG1lc3NhZ2UuY29tcGFueWtleQogICAgICB9KTsKICAgIH0sCiAgICBkb1NlbmQ6IGZ1bmN0aW9uIGRvU2VuZChzZW5ka2V5KSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgaWYgKHRoaXMudXNlci51aWQgJiYgdGhpcy5pbnB1dC5sZW5ndGgpIHsKICAgICAgICAvLyBmaXJlYmFzZSDjgavjg6Hjg4Pjgrvjg7zjgrjjgpLov73liqAKICAgICAgICBmaXJlYmFzZS5kYXRhYmFzZSgpLnJlZigiY29tbWVudC8iICsgc2VuZGtleSkucHVzaCh7CiAgICAgICAgICBtZXNzYWdlOiB0aGlzLmlucHV0LAogICAgICAgICAgbmFtZTogdGhpcy51c2VyLmRpc3BsYXlOYW1lLAogICAgICAgICAgaW1hZ2U6IHRoaXMudXNlci5waG90b1VSTCwKICAgICAgICAgIGNvbXBhbnlrZXk6IHNlbmRrZXkKICAgICAgICB9LCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBfdGhpczIuaW5wdXQgPSAiIjsgLy8g44OV44Kp44O844Og44KS56m644Gr44GZ44KLCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KICB9Cn07"},{"version":3,"sources":["Detail.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwCA,SAAA,QAAA,QAAA,MAAA;AACA,OAAA,QAAA,MAAA,UAAA;AACA,OAAA,KAAA,MAAA,WAAA;AACA,eAAA;AACA,EAAA,UAAA,EAAA;AAAA,IAAA,KAAA,EAAA;AAAA,GADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,IAAA,EAAA,EADA;AACA;AACA,MAAA,IAAA,EAAA,EAFA;AAEA;AACA,MAAA,KAAA,EAAA,EAHA,CAGA;;AAHA,KAAA;AAKA,GARA;AASA,EAAA,OATA,qBASA;AAAA;;AACA,IAAA,WAAA,CAAA,YAAA;AACA,MAAA,QAAA,CAAA,IAAA,GAAA,kBAAA,CAAA,UAAA,IAAA,EAAA;AACA,QAAA,KAAA,CAAA,IAAA,GAAA,IAAA,GAAA,IAAA,GAAA,EAAA;AACA,QAAA,KAAA,CAAA,IAAA,GAAA,EAAA;AACA,YAAA,WAAA,GAAA,QAAA,CACA,QADA,GAEA,GAFA,CAEA,aAAA,KAAA,CAAA,MAAA,CAAA,KAAA,CAAA,OAAA,CAAA,GAFA,CAAA;AAGA,QAAA,WAAA,CAAA,WAAA,CAAA,GAAA,EAAA,EAAA,CAAA,aAAA,EAAA,KAAA,CAAA,UAAA;AACA,OAPA;AAQA,KATA,EASA,GATA,CAAA,CADA,CAUA;AACA,GApBA;AAqBA,EAAA,QAAA,oBACA,QAAA,CAAA;AACA,IAAA,OAAA,EAAA;AADA,GAAA,CADA,CArBA;AA0BA,EAAA,OAAA,EAAA;AACA,IAAA,UADA,sBACA,IADA,EACA;AACA,UAAA,OAAA,GAAA,IAAA,CAAA,GAAA,EAAA;AACA,WAAA,IAAA,CAAA,IAAA,CAAA;AACA,QAAA,GAAA,EAAA,IAAA,CAAA,GADA;AAEA,QAAA,IAAA,EAAA,OAAA,CAAA,IAFA;AAGA,QAAA,KAAA,EAAA,OAAA,CAAA,KAHA;AAIA,QAAA,OAAA,EAAA,OAAA,CAAA,OAJA;AAKA,QAAA,UAAA,EAAA,OAAA,CAAA;AALA,OAAA;AAOA,KAVA;AAWA,IAAA,MAXA,kBAWA,OAXA,EAWA;AAAA;;AACA,UAAA,KAAA,IAAA,CAAA,GAAA,IAAA,KAAA,KAAA,CAAA,MAAA,EAAA;AACA;AACA,QAAA,QAAA,CACA,QADA,GAEA,GAFA,CAEA,aAAA,OAFA,EAGA,IAHA,CAIA;AACA,UAAA,OAAA,EAAA,KAAA,KADA;AAEA,UAAA,IAAA,EAAA,KAAA,IAAA,CAAA,WAFA;AAGA,UAAA,KAAA,EAAA,KAAA,IAAA,CAAA,QAHA;AAIA,UAAA,UAAA,EAAA;AAJA,SAJA,EAUA,YAAA;AACA,UAAA,MAAA,CAAA,KAAA,GAAA,EAAA,CADA,CACA;AACA,SAZA;AAcA;AACA;AA7BA;AA1BA,CAAA","sourcesContent":["<template>\n  <div class=\"detail\">\n    <h2>詳細ページ</h2>\n    <div>会社名:{{ company.name }}</div>\n    <div>実習場所:{{ company.place }}</div>\n    <div>実習期間:{{ company.day }}</div>\n    <div>感想:{{ company.feel }}</div>\n    <br />\n    <h3>~みんなのコメント~</h3>\n    <!--Firebase から取得したリストを描画（トランジション付き）-->\n    <transition-group name=\"chat\" tag=\"div\" class=\"list content\">\n      <section\n        v-for=\"{ key, name, image, message, companykey } in chat\"\n        :key=\"key\"\n      >\n        <div v-if=\"company.key == companykey\" key=\"chat\" class=\"box11\">\n          <div class=\"item-detail\">\n            <div class=\"item-name\">{{ name }}</div>\n            <div class>\n              {{ message }}\n            </div>\n          </div>\n        </div>\n      </section> </transition-group\n    >\u0010\n\n    <!-- 入力フォーム -->\n    <form action=\"\" @submit.prevent=\"doSend(company.key)\" class=\"form\">\n      <textarea\n        v-model=\"input\"\n        :disabled=\"!user.uid\"\n        placeholder=\"コメントを残す\"\n      ></textarea>\n      <button type=\"submit\" :disabled=\"!user.uid\" class=\"send-button\">\n        Send\n      </button>\n    </form>\n  </div>\n</template>\n<script>\nimport { mapState } from \"vuex\";\nimport firebase from \"firebase\";\nimport Nl2br from \"vue-nl2br\";\nexport default {\n  components: { Nl2br },\n  data() {\n    return {\n      user: {}, // ユーザー情報\n      chat: [], // 取得したメッセージを入れる配列\n      input: \"\" // 入力したメッセージ\n    };\n  },\n  created() {\n    setInterval(() => {\n      firebase.auth().onAuthStateChanged(user => {\n        this.user = user ? user : {};\n        this.chat = [];\n        const ref_message = firebase\n          .database()\n          .ref(\"comment/\" + this.$store.state.company.key);\n        ref_message.limitToLast(100).on(\"child_added\", this.childAdded);\n      });\n    }, 100); //更新に時間がかかるため\n  },\n  computed: {\n    ...mapState({\n      company: \"company\"\n    })\n  },\n  methods: {\n    childAdded(snap) {\n      const message = snap.val();\n      this.chat.push({\n        key: snap.key,\n        name: message.name,\n        image: message.image,\n        message: message.message,\n        companykey: message.companykey\n      });\n    },\n    doSend(sendkey) {\n      if (this.user.uid && this.input.length) {\n        // firebase にメッセージを追加\n        firebase\n          .database()\n          .ref(\"comment/\" + sendkey)\n          .push(\n            {\n              message: this.input,\n              name: this.user.displayName,\n              image: this.user.photoURL,\n              companykey: sendkey\n            },\n            () => {\n              this.input = \"\"; // フォームを空にする\n            }\n          );\n      }\n    }\n  }\n};\n</script>\n"],"sourceRoot":"src/views"}]}